import{g as f,c as k,m as w,a as r,o as s,b as t,t as n,k as M,F as m,r as _,i as L,p as B,n as b,u as x,s as R,q as T,f as $,h as C,j as E,l as p}from"./index-DXSatcRK.js";const S={class:"movie list"},V={class:"movie-subtext"},q={class:"movie-list"},A={key:0},N=["src"],F={key:1,class:"skeleton-list-item"},H={class:"movie-list__txt"},j={class:"movie-list__title"},z={class:"movie-list__desc"},D={class:"movie-list__release"},O={__name:"ListMovie",props:{movies:Array,loading:Boolean,moreLoading:Boolean},setup(v){const l=f(),a=v,c=k(()=>{switch(l.params.type){case"now_playing":return"현재 사용중인 영화";case"popular":return"인기 있는 영화";case"upcoming":return"개봉예정 영화";case"top_rated":return"높은 평점을 받은 영화";case"search":return`'${l.query.keyword}' 검색결과`}});return(u,o)=>{const d=w("RouterLink");return s(),r("section",S,[t("h4",V,n(c.value),1),t("div",q,[a.movies?(s(!0),r(m,{key:0},_(a.movies,e=>(s(),r("div",{class:"movie-list__item",key:e.id},[L(d,{to:`/detail/${e.id}`},{default:B(()=>[e.poster_path?(s(),r("figure",A,[t("img",{src:`https://image.tmdb.org/t/p/w300/${e.poster_path}`,alt:""},null,8,N)])):(s(),r("figure",F)),t("div",H,[t("div",{class:b(["progress-circle",[`p${Math.floor(e.vote_average*10)}`,{over50:Math.floor(e.vote_average*10)>50}]])},[t("span",null,n(Math.floor(e.vote_average*10))+"%",1),o[0]||(o[0]=t("div",{class:"left-half-clipper"},[t("div",{class:"first50-bar"}),t("div",{class:"value-bar"})],-1))],2),t("strong",j,n(e.title),1),t("p",z,n(e.overview),1),t("span",D,n(e.release_date.replace(/-/gi,"."))+" / 평점 "+n(e.vote_average),1)])]),_:2},1032,["to"])]))),128)):(s(!0),r(m,{key:1},_(new Array(20).fill(0),(e,i)=>(s(),r("div",{class:"movie-list__item",key:i},o[1]||(o[1]=[t("a",{href:"#",class:"skeleton-list-item ui0"},null,-1)])))),128)),a.moreLoading?(s(!0),r(m,{key:2},_(new Array(20).fill(0),(e,i)=>(s(),r("div",{class:"movie-list__item",key:i},o[2]||(o[2]=[t("a",{href:"#",class:"skeleton-list-item ui0"},null,-1)])))),128)):M("",!0)])])}}},Y={__name:"ListView",setup(v){const l=f(),a=x(),c=l.params.type,u=l.query.keyword,{moreMovies:o,moreMoviesLoading:d,moreMoviesOneMorePageLoading:e}=R(a);let i=null;const y=T(1),g=()=>{i&&clearTimeout(i),i=setTimeout(()=>{window.innerHeight+window.scrollY>=document.documentElement.offsetHeight&&a.getMoreMovies(++y.value,c,u)},200)};return $(()=>{a.getMoreMovies(1,c,u),window.addEventListener("scroll",g)}),C(()=>{o.value=[],window.removeEventListener("scroll",g)}),(h,P)=>(s(),E(O,{"sub-title":"Top Rated",title:"높은 평점을 받은 영화",movies:p(o),loading:p(d),moreLoading:p(e)},null,8,["movies","loading","moreLoading"]))}};export{Y as default};
